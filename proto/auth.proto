syntax = "proto3";

package auth;

// The service definition
service AuthService{
  // Validate or create user
  rpc ValidateOrCreateUser(ValidateOrCreateUserRequest) returns (UserResponse) {}
  
  
  // Extract user data
  rpc GetUserByClerkId (GetUserRequest) returns (UserResponse) {}
  
  // Create new user
  rpc CreateUser (CreateUserRequest) returns (UserResponse) {}
  
  // Update user data
  rpc UpdateUserByClerkId (UpdateUserRequest) returns (UserResponse) {}
}

// Request messages
message GetUserRequest {
  string clerk_user_id = 1;
}

message ValidateOrCreateUserRequest {
  string clerk_user_id = 1;
  string email = 2;
}

message CreateUserRequest {
  string clerk_user_id = 1;
  string email = 2;
  string role = 3;
}

message UpdateUserRequest {
  string clerk_user_id = 1;
  optional string email = 2; 
  optional string role = 3;
}

// Response message
message UserResponse {
   string id = 1;
  string clerkUserId = 2;
  string email = 3;
  string firstName = 4;
  string lastName = 5;
  string role = 6;
}