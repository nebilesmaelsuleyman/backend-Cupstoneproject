syntax = "proto3";

package auth;

// Service definition
service AuthService {
  rpc ValidateOrCreateUser(ValidateOrCreateUserRequest) returns (UserResponse);
  rpc GetUserByClerkId(GetUserRequest) returns (UserResponse);
  rpc CreateUser(CreateUserRequest) returns (UserResponse);
  rpc UpdateUserByClerkId(UpdateUserRequest) returns (UserResponse);
  rpc OnboardUser(OnboardUserRequest) returns (UserResponse);
}

// Onboarding
message OnboardUserRequest {
  string clerkUserId = 1;
  string role = 2;
  string schoolCode = 3;
}

// Requests
message GetUserRequest {
  string clerkUserId = 1;
}

message ValidateOrCreateUserRequest {
  string clerkUserId = 1;
  string email = 2;
}

message CreateUserRequest {
  string clerkUserId = 1;
  string email = 2;
  string role = 3;
}

message UpdateUserRequest {
  string clerkUserId = 1;
  string email = 2;
  string role = 3;
}

// Response
message UserResponse {
  string id = 1;
  string clerkUserId = 2;
  string email = 3;
  string firstName = 4;
  string lastName = 5;
  string role = 6;
  repeated string schoolIds = 7;
}
